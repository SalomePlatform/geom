#  Copyright (C) 2005  OPEN CASCADE, EADS/CCR, LIP6, CEA/DEN,
#  CEDRAT, EDF R&D, LEG, PRINCIPIA R&D, BUREAU VERITAS
#
#  This library is free software; you can redistribute it and/or
#  modify it under the terms of the GNU Lesser General Public
#  License as published by the Free Software Foundation; either
#  version 2.1 of the License.
#
#  This library is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#  Lesser General Public License for more details.
#
#  You should have received a copy of the GNU Lesser General Public
#  License along with this library; if not, write to the Free Software
#  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
#
# See http://www.salome-platform.org/ or email : webmaster.salome@opencascade.com
#
# -* Makefile *- 
#
# Author : Patrick GOLDBRONN (CEA)
# Date : 28/06/2001
# $Header$
#

# source path
top_srcdir=@top_srcdir@
top_builddir=.
srcdir=@srcdir@
VPATH=.:@srcdir@:@top_srcdir@/bin:./bin/salome:./resources:@top_srcdir@/resources:./bin:@top_srcdir@/idl


@COMMENCE@

SUBDIRS = idl src doc adm_local

RESOURCES_FILES = \
GEOM_en.xml \
GEOM_fr.xml \
GEOM.config \
GEOMCatalog.xml \
SalomeApp.xml \
GEOMDS_Resources \
ImportExport \
ShHealing \
arc.png \
archimede.png \
axisinertia.png \
basicproperties.png \
bounding.png \
box.png \
box2points.png \
boxdxyz.png \
build_compound.png \
build_edge.png \
build_face.png \
build_shell.png \
build_solid.png \
build_wire.png \
centergravity.png \
chamfer.png \
chamferall.png \
chamferedge.png \
chamferface.png \
check.png \
circle.png \
circlepointvector.png \
circle3points.png \
common.png \
cone.png \
conedxyz.png \
conepointvector.png \
cut.png \
cylinder.png \
cylinderdxyz.png \
cylinderpointvector.png \
delete.png \
display.png \
displayonly.png \
displayall.png \
erase.png \
eraseall.png \
fillet.png \
filletall.png \
filletedge.png \
filletface.png \
filling.png \
fuse.png \
geometry.png \
line.png \
line2points.png \
lineedge.png \
linepointvector.png \
mindist.png \
mirrorPoint.png \
mirrorAxe.png \
mirrorPlane.png \
ModuleGeom.png \
multirotation.png \
multirotationdouble.png \
multirotationsimple.png \
multitranslation.png \
multitranslationdouble.png \
multitranslationsimple.png \
offset.png \
orientation.png \
partition.png \
partitionkeep.png \
partitionplane.png \
pipe.png \
plane.png \
planeWorking.png \
planedxyz.png \
plane3points.png \
planeface.png \
planepointvector.png \
planeworkingface.png \
planeworkingvector.png \
planeworkingorigin.png \
point2.png \
pointonedge.png \
polyline.png \
prism.png \
revol.png \
rotate.png \
scale.png \
section.png \
select1.png \
sewing.png \
shading.png \
sketch.png \
sphere.png \
spheredxyz.png \
spherepoint.png \
subshape.png \
supressHolesOnFaceShell.png \
supressface.png \
supresshole.png \
tolerance.png \
torus.png \
torusdxyz.png \
toruspointvector.png \
translationDxyz.png \
translationPoints.png \
translationVector.png \
tree_compound.png \
tree_compsolid.png \
tree_edge.png \
tree_face.png \
tree_shape.png \
tree_shell.png \
tree_solid.png \
tree_vertex.png \
tree_wire.png \
tree_group_vertex.png \
tree_group_edge.png \
tree_group_face.png \
tree_group_solid.png \
tree_lcs.png \
vector.png \
vector2points.png \
vectordxyz.png \
whatis.png \
ellipse.png \
ellipsepointvector.png \
bezier.png \
interpol.png \
spline.png \
closecontour.png \
suppressintwires.png \
marker.png \
marker2.png \
marker3.png \
position.png \
position2.png \
free_bound.png \
point_coord.png \
point3.png \
shapeprocess.png \
block_2f.png \
block_6f.png \
block_face_2e.png \
block_face_4e.png \
block_face_4v.png \
block_multitrsf_double.png \
block_multitrsf_simple.png \
tree_block.png \
subblock.png \
group_new.png \
group_edit.png \
glue.png \
check_blocks_compound.png \
free_faces.png \
propagate.png \
redo.png \
undo.png


BIN_SCRIPT= \
VERSION

# copy header files in common directory

include_list = include/salome/SALOMEconfig.h \
               include/salome/GEOM_version.h

ifneq ($(HAVE_SSTREAM),yes)
	include_list += include/salome/sstream
endif

inc: idl $(include_list)

bin: bin/salome/VERSION

bin/salome/VERSION : bin/VERSION
	-$(RM) $@
	$(LN_S) ../../$< $@

include/salome/SALOMEconfig.h: salome_adm/unix/SALOMEconfig.ref
	-$(RM) $@
	$(LN_S) ../../$< $@

# test if SALOMEconfig.h has changed (contents)
salome_adm/unix/SALOMEconfig.ref: salome_adm/unix/SALOMEconfig.h
	@if ! [ -a $@ ]; then \
	  cp -p -f $< $@;        \
	fi;		      \
	if ! cmp $< $@; then  \
	  cp -p -f $< $@;        \
	fi;		      \

include/salome/sstream: salome_adm/unix/sstream
	-$(RM) $@
	$(LN_S) ../../$< $@

include/salome/GEOM_version.h: GEOM_version.h
	-$(RM) $@
	$(LN_S) ../../$< $@

depend: depend_idl

depend_idl:
	(cd idl ; $(MAKE) $@) || exit 1

# doc is already build : if you want to had documents, go manually to doc and run 'make doc'
#doc:
#	(cd doc && $(MAKE) $@) || exit 1

install-end:
# finish libtool install
#	@$(LT) --mode=finish $(libdir)

install-include: $(include_list)
	$(INSTALL) -d  $(includedir)
	@for f in X $(include_list); do					\
	   if test $$f != X; then					\
	     ($(INSTALL_DATA) -p $$f $(includedir)/. || exit 1);	\
	   fi;								\
	done

# install script in $(bindir) :
install-bin: $(BIN_SCRIPT)
	$(INSTALL) -d  $(bindir)
	if test $(BIN_SCRIPT)X != X; then 			\
		$(INSTALL_PROGRAM) $^ $(bindir);		\
	fi

uninstall: uninstall-idl

uninstall-idl:
	$(RM) $(idldir)/*.idl

distclean: distclean-other

distclean-other:
	-$(RM) salome_adm/unix/*~ salome_adm/unix/*% salome_adm/unix/*.bak salome_adm/unix/*.new salome_adm/unix/*.old
	-$(RM) salome_adm/unix/make_* 
	-$(RM) salome_adm/unix/depend salome_adm/unix/SALOMEconfig.h 
	-$(RM) config.cache config.log config.status 

@MODULE@

install: install-bin install-include install-end

